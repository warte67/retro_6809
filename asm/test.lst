                      ; test.asm
                      ;
                      
0000                                  INCLUDE "Memory_Map.asm"
                      
                      
                      ;    memory_map.asm
                      ;
                      ;   **********************************************
                      ;   * Allocated 64k Memory Mapped System Symbols *
                      ;   **********************************************
                      ;
                      
0000                  SOFT_VECTORS_DEVICE   equ   0x0000    ; START: Software Interrupt Vectors
0000                  SOFT_EXEC             equ   0x0000    ; Exec Software Interrupt Vector
0002                  SOFT_SWI3             equ   0x0002    ; SWI3 Software Interrupt Vector
0004                  SOFT_SWI2             equ   0x0004    ; SWI2 Software Interrupt Vector
0006                  SOFT_FIRQ             equ   0x0006    ; FIRQ Software Interrupt Vector
0008                  SOFT_IRQ              equ   0x0008    ; IRQ Software Interrupt Vector
000A                  SOFT_SWI              equ   0x000A    ; SWI / SYS Software Interrupt Vector
000C                  SOFT_NMI              equ   0x000C    ; NMI Software Interrupt Vector
000E                  SOFT_RESET            equ   0x000E    ; RESET Software Interrupt Vector
                      ; _______________________________________________________________________
                      
0010                  SYSTEM_MEMORY_DEVICE  equ   0x0010    ; START: System Memory
0010                  ZERO_PAGE             equ   0x0010    ; Zero Page System and User Variables
0100                  FIO_BUFFER            equ   0x0100    ; START: File Input/Output Buffer
01FF                  FIO_BFR_END           equ   0x01FF    ; END: File Input/Output Buffer
0200                  SYSTEM_STACK          equ   0x0200    ; Bottom of the system stack spcace
0400                  SSTACK_TOP            equ   0x0400    ; Top of the system statck space
                      ; _______________________________________________________________________
                      
0400                  VIDEO_BUFFER_DEVICE   equ   0x0400    ; START: Video Buffer (8K)
0400                  VIDEO_START           equ   0x0400    ; Start of standard video buffer
23FF                  VIDEO_END             equ   0x23FF    ; End of standard video buffer
2400                  VIDEO_TOP             equ   0x2400    ; Top of standard video buffer
                      ; _______________________________________________________________________
                      
2400                  USER_MEMORY_DEVICE    equ   0x2400    ; START: User Memory (34K)
2400                  USER_RAM              equ   0x2400    ; User Accessable RAM
AFFF                  USER_RAM_END          equ   0xAFFF    ; End User Accessable RAM
B000                  USER_RAM_TOP          equ   0xB000    ; Top User Accessable RAM
                      ; _______________________________________________________________________
                      
B000                  MEMBANK_DEVICE        equ   0xB000    ; START: Banked Memory Region (16K)
B000                  MEMBANK_ONE           equ   0xB000    ; Banked Memory Page One (8K)
D000                  MEMBANK_TWO           equ   0xD000    ; Banked Memory Page Two (8K)
EFFF                  MEMBANK_END           equ   0xEFFF    ; End of Banked Memory Region
F000                  MEMBANK_TOP           equ   0xF000    ; TOP of Banked Memory Region
                      ; _______________________________________________________________________
                      
F000                  KERNEL_ROM_DEVICE     equ   0xF000    ; START: Kernel Rom (3.5K)
F000                  KERNEL_START          equ   0xF000    ; Start of Kernel Rom Space
FDFF                  KERNEL_END            equ   0xFDFF    ; End of Kernel Rom Space
FE00                  KERNEL_TOP            equ   0xFE00    ; Top of Kernel Rom Space
                      ; _______________________________________________________________________
                      
FE00                  SYS_DEVICE            equ   0xFE00    ; START: System and Debug Hardware Registers:
FE00                  SYS_BEGIN             equ   0xFE00    ; Start of System Registers
FE00                  SYS_STATE             equ   0xFE00    ; (Byte) System State Register
                                                            ; SYS_STATE: ABCD.SSSS                          
                                                            ; - bit  7   = Error: Standard Buffer Overflow  
                                                            ; - bit  6   = Error: Extended Buffer Overflow  
                                                            ; - bit  5   = Error: Reserved                  
                                                            ; - bit  4   = Error: Reserved                  
                                                            ; - bits 0-3 = CPU Speed (0-15):                
                                                            ;    0 ($0)  = CPU Clock   10 kHz            
                                                            ;    1 ($1)  = CPU Clock   25 kHz            
                                                            ;    2 ($2)  = CPU Clock   50 kHz            
                                                            ;    3 ($3)  = CPU Clock   75 kHz            
                                                            ;    4 ($4)  = CPU Clock  100 kHz            
                                                            ;    5 ($5)  = CPU Clock  150 kHz            
                                                            ;    6 ($6)  = CPU Clock  225 kHz            
                                                            ;    7 ($7)  = CPU Clock  350 kHz            
                                                            ;    8 ($8)  = CPU Clock  500 kHz            
                                                            ;    9 ($9)  = CPU Clock  750 kHz            
                                                            ;   10 ($A)  = CPU Clock  900 kHz            
                                                            ;   11 ($B)  = CPU Clock 1000 khz            
                                                            ;   12 ($C)  = CPU Clock 2000 khz            
                                                            ;   13 ($D)  = CPU Clock 3000 khz            
                                                            ;   14 ($E)  = CPU Clock 4000 khz            
                                                            ;   15 ($F)  = CPU Clock ~10.0 mhz. (unmetered) 
                                                            ; 
FE01                  SYS_SPEED             equ   0xFE01    ; (Word) Average CPU Clock Speed (Read Only)
FE03                  SYS_CLOCK_DIV         equ   0xFE03    ; (Byte) 60 hz Clock Divider Register (Read Only)
                                                            ; - bit 7: 0.546875 hz
                                                            ; - bit 6: 1.09375 hz
                                                            ; - bit 5: 2.1875 hz
                                                            ; - bit 4: 4.375 hz
                                                            ; - bit 3: 8.75 hz
                                                            ; - bit 2: 17.5 hz
                                                            ; - bit 1: 35.0 hz
                                                            ; - bit 0: 70.0 hz
                                                            ; 
FE04                  SYS_UPDATE_COUNT      equ   0xFE04    ; (DWord) Increments with each update event
FE08                  SYS_DBG_BRK_ADDR      equ   0xFE08    ; (Word) Address of current debug breakpoint
FE0A                  SYS_DBG_FLAGS         equ   0xFE0A    ; (Byte) Debug Specific Hardware Flags:
                                                            ; - bit 7: Debug Enable
                                                            ; - bit 6: Single Step Enable
                                                            ; - bit 5: Clear All Breakpoints
                                                            ; - bit 4: Update Breakpoint at DEBUG_BRK_ADDR
                                                            ; - bit 3: FIRQ  (on low {0} to high {1} edge)
                                                            ; - bit 2: IRQ   (on low {0} to high {1} edge)
                                                            ; - bit 1: NMI   (on low {0} to high {1} edge)
                                                            ; - bit 0: RESET (on low {0} to high {1} edge)
                                                            ; 
FE0A                  SYS_END               equ   0xFE0A    ; End of System Registers
FE0B                  SYS_TOP               equ   0xFE0B    ; Top of System Registers
                                                            ; 
                      
FE0B                  GPU_DEVICE            equ   0xFE0B    ; START: GPU Device Hardware Registers
FE0B                  GPU_OPTIONS           equ   0xFE0B    ; (Byte) Bitflag Enables
                                                            ; - bit 7    = Extended Bitmap:
                                                            ;               0: Tilemap Display
                                                            ;               1: Bitmap Display
                                                            ; - bits 5-6 = Extended Color Mode:
                                                            ;               00: 2-Colors
                                                            ;               01: 4-Colors
                                                            ;               10: 16-Colors
                                                            ;               11: 256-Colors
                                                            ; - bits 4   = Extended Display Enable
                                                            ;               0: Disabled
                                                            ;               1: Enabled
                                                            ; - bits 3   = Application Screen Mode
                                                            ;               0: Windowed
                                                            ;               1: Fullscreen
                                                            ; - bits 2   = VSync Enable
                                                            ;               0: Disabled
                                                            ;               1: Enabled
                                                            ; - bits 1   = Sprite Enable
                                                            ;               0: Disabled
                                                            ;               1: Enabled
                                                            ; - bit  0   = Standard Display Enable
                                                            ;               0: Disabled
                                                            ;               1: Enabled
                                                            ; 
FE0C                  GPU_MODE              equ   0xFE0C    ; (Byte) Bitflag Enables
                                                            ; - bit 7    = Standard Bitmap:
                                                            ;               0: Text Display
                                                            ;               1: Bitmap Display
                                                            ; - bits 5-6 = Standard Color Mode:
                                                            ;               00: 2-Colors
                                                            ;               01: 4-Colors
                                                            ;               10: 16-Colors
                                                            ;               11: 256-Colors
                                                            ; - bits 0-4 = Display Mode (0-31)
                                                            ; 
FE0D                  GPU_VIDEO_MAX         equ   0xFE0D    ; (Word) Video Buffer Maximum (Read Only)
                                                            ;  Note: This will change to reflect
                                                            ;        the size of the last cpu
                                                            ;        accessible memory location
                                                            ;        of the currently active
                                                            ;        standard video mode.
                                                            ; 
FE0F                  GPU_HRES              equ   0xFE0F    ; (Word) Horizontal Resolution (Read Only)
                                                            ;   Note: This will reflect the number of
                                                            ;        pixel columns for bitmap modes.
                                                            ; 
FE11                  GPU_VRES              equ   0xFE11    ; (Word) Vertical Resolution (Read Only)
                                                            ;   Note: This will reflect the number of
                                                            ;        pixel rows for bitmap modes.
                                                            ; 
FE13                  GPU_TCOLS             equ   0xFE13    ; (Byte) Text Horizontal Columns (Read Only)
                                                            ;   Note: This will reflect the number of
                                                            ;        glyph columns for text modes.
                                                            ; 
FE14                  GPU_TROWS             equ   0xFE14    ; (Byte) Text Vertical Rows (Read Only)
                                                            ;   Note: This will reflect the number of
                                                            ;        glyph rows for text modes.
                                                            ; 
FE14                  GPU_END               equ   0xFE14    ; End of GPU Register Space
FE15                  GPU_TOP               equ   0xFE15    ; Top of GPU Register Space
                      ; _______________________________________________________________________
                      
FE15                  HDW_RESERVED_DEVICE   equ   0xFE15    ; START: Reserved Register Space
FFEF                  HDW_REG_END           equ   0xFFEF    ; 474 bytes reserved for future use.
                      ; _______________________________________________________________________
                      
FFF0                  ROM_VECTS_DEVICE      equ   0xFFF0    ; START: Hardware Interrupt Vectors
FFF0                  HARD_EXEC             equ   0xFFF0    ; EXEC Hardware Interrupt Vector
FFF2                  HARD_SWI3             equ   0xFFF2    ; SWI3 Hardware Interrupt Vector
FFF4                  HARD_SWI2             equ   0xFFF4    ; SWI2 Hardware Interrupt Vector
FFF6                  HARD_FIRQ             equ   0xFFF6    ; FIRQ Hardware Interrupt Vector
FFF8                  HARD_IRQ              equ   0xFFF8    ; IRQ Hardware Interrupt Vector
FFFA                  HARD_SWI              equ   0xFFFA    ; SWI / SYS Hardware Interrupt Vector
FFFC                  HARD_NMI              equ   0xFFFC    ; NMI Hardware Interrupt Vector
FFFE                  HARD_RESET            equ   0xFFFE    ; RESET Hardware Interrupt Vector
                      
                      
                      ; END of memory_map.asm definitions
                      
                      
                      
FFFE                                  org     $FFFE
FFFE  2400                            fdb     start
                      
                      
2400                                  org $2400
                      
2400                  start           
2400  12                              nop
2401  12                              nop
2402  12                              nop
2403  12                              nop
2404  12                              nop
2405  12                              nop
2406  12                              nop
2407  12                              nop
2408  12                              nop
2409  12                              nop
240A  12                              nop
240B  12                              nop
240C  12                              nop
240D  12                              nop
240E  12                              nop
240F  12                              nop
2410  12                              nop
2411  12                              nop
2412  12                              nop
2413  12                              nop
2414  12                              nop
2415  12                              nop
2416  12                              nop
2417  12                              nop
2418  12                              nop
2419  12                              nop
                                      
241A  CC0100                          ldd     #$0100
241D  8E0400          lp2             ldx     #VIDEO_START            
2420  C30001                          addd    #1
2423  ED81            lp1             std     ,x++
2425  C30001                          addd    #1
2428  BCFE0D                          cmpx    GPU_VIDEO_MAX
242B  2DF6                            blt     lp1
242D  20EE                            bra     lp2
                      
                      
                      
                      
